/**
 * Section base styles.
 * CSS variables are READ from drivers - never SET here.
 *
 * RULES (from section.spec.md):
 * - No viewport units - BehaviourWrapper handles sizing
 * - No site-specific selectors - those belong in presets
 * - Only generic .section styles that apply to ALL sections
 */

.section {
  /* No transform here — position:fixed works inside sections.
   * Scroll behaviours apply transform via [data-behaviour^="scroll/"] > .section */
  /* Default auto — NOT 0. z-index:0 on a positioned element creates a stacking
   * context that traps position:fixed children. auto avoids this so fixed elements
   * (e.g. TeamShowcase video) can escape and cover the viewport. Behaviours that
   * need stacking control set --section-z explicitly. */
  z-index: var(--section-z, auto);
  opacity: var(--section-opacity, 1);

  /* Transition from theme - defaults to none if not set */
  transition: opacity var(--section-fade-duration, 0s) var(--section-fade-easing, ease-out);

  /* Base sizing - fill parent (no viewport units!) */
  width: 100%;
  position: relative;
  box-sizing: border-box;

  /* Centering: harmless without max-width, enables constraint when toggled */
  margin-left: auto;
  margin-right: auto;
}

/* Constrained sections: opt-in max-width from site theme */
.section[data-constrained] {
  max-width: var(--site-max-width, none);
}

/* Scroll-driven behaviours: transform only applied here (not on all sections)
 * so that non-scroll sections don't create containing blocks that trap position:fixed.
 * Also bypasses CSS transition — driver handles updates directly. */
[data-behaviour^="scroll/"] > .section {
  transform: translateY(var(--section-y, 0));
  transition: none;
  will-change: opacity, transform;
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .section {
    transition: none;
  }
}

/* Layout type: flex */
.section[data-layout="flex"] {
  display: flex;
}

/* Layout type: grid */
.section[data-layout="grid"] {
  display: grid;
}

/* Layout type: stack (vertical flex) */
.section[data-layout="stack"] {
  display: flex;
  flex-direction: column;
}

/* Direction modifiers for flex/stack */
.section[data-direction="row"] {
  flex-direction: row;
}

.section[data-direction="column"] {
  flex-direction: column;
}

/* Alignment modifiers */
.section[data-align="start"] {
  align-items: flex-start;
}

.section[data-align="center"] {
  align-items: center;
}

.section[data-align="end"] {
  align-items: flex-end;
}

.section[data-align="stretch"] {
  align-items: stretch;
}

/* Justify modifiers */
.section[data-justify="start"] {
  justify-content: flex-start;
}

.section[data-justify="center"] {
  justify-content: center;
}

.section[data-justify="end"] {
  justify-content: flex-end;
}

.section[data-justify="between"] {
  justify-content: space-between;
}

.section[data-justify="around"] {
  justify-content: space-around;
}
